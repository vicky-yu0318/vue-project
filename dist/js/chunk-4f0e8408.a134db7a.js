(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-4f0e8408"],{1915:function(t,e,r){"use strict";function c(){window.pageYOffset>100&&window.scrollTo({top:0,behavior:"smooth"})}r.d(e,"a",(function(){return c}))},"99af":function(t,e,r){"use strict";var c=r("23e7"),n=r("da84"),o=r("d039"),s=r("e8b5"),a=r("861d"),i=r("7b0b"),l=r("07fa"),u=r("8418"),d=r("65f0"),b=r("1dde"),O=r("b622"),h=r("2d00"),j=O("isConcatSpreadable"),p=9007199254740991,f="Maximum allowed index exceeded",g=n.TypeError,v=h>=51||!o((function(){var t=[];return t[j]=!1,t.concat()[0]!==t})),m=b("concat"),w=function(t){if(!a(t))return!1;var e=t[j];return void 0!==e?!!e:s(t)},P=!v||!m;c({target:"Array",proto:!0,forced:P},{concat:function(t){var e,r,c,n,o,s=i(this),a=d(s,0),b=0;for(e=-1,c=arguments.length;e<c;e++)if(o=-1===e?s:arguments[e],w(o)){if(n=l(o),b+n>p)throw g(f);for(r=0;r<n;r++,b++)r in o&&u(a,b,o[r])}else{if(b>=p)throw g(f);u(a,b++,o)}return a.length=b,a}})},b0c0:function(t,e,r){var c=r("83ab"),n=r("5e77").EXISTS,o=r("e330"),s=r("9bf2").f,a=Function.prototype,i=o(a.toString),l=/function\b(?:\s|\/\*[\S\s]*?\*\/|\/\/[^\n\r]*[\n\r]+)*([^\s(/]*)/,u=o(l.exec),d="name";c&&!n&&s(a,d,{configurable:!0,get:function(){try{return u(l,i(this))[1]}catch(t){return""}}})},b84e:function(t,e,r){"use strict";r.r(e);r("b0c0");var c=r("7a23"),n={class:"section section-order"},o={class:"container"},s=Object(c["h"])("h2",{class:"title"},"訂購已完成",-1),a={key:0,class:"row"},i={class:"col"},l=Object(c["h"])("caption",null," 訂購資訊 ",-1),u=Object(c["h"])("td",{width:"40%"},"訂單金額:",-1),d={width:"60%"},b=Object(c["h"])("td",null,"訂單編號:",-1),O=Object(c["h"])("td",null,"訂購時間:",-1),h=Object(c["h"])("td",null,"Email:",-1),j=Object(c["h"])("td",null,"收件人姓名:",-1),p=Object(c["h"])("td",null,"收件人聯絡電話:",-1),f=Object(c["h"])("td",null,"收件人地址:",-1),g={class:"col"},v=Object(c["h"])("caption",null," 訂單內容 ",-1),m={rowspan:"2"},w=["src"],P={rowspan:"2"},y={style:{"text-align":"right"}},M={key:0,colspan:"3"},S=Object(c["j"])(" 返回首頁 ");function T(t,e,r,T,$,k){var x=Object(c["J"])("Progressbar"),F=Object(c["J"])("router-link");return Object(c["B"])(),Object(c["g"])(c["a"],null,[Object(c["k"])(x,{currentProgress:$.currentProgress},null,8,["currentProgress"]),Object(c["h"])("section",n,[Object(c["h"])("div",o,[s,$.order.id?(Object(c["B"])(),Object(c["g"])("div",a,[Object(c["h"])("div",i,[Object(c["h"])("table",null,[l,Object(c["h"])("tr",null,[u,Object(c["h"])("td",d,Object(c["M"])(t.$filters.toCurrency($.newOrderPrice)),1)]),Object(c["h"])("tr",null,[b,Object(c["h"])("td",null,Object(c["M"])($.order.id),1)]),Object(c["h"])("tr",null,[O,Object(c["h"])("td",null,Object(c["M"])($.orderTime),1)]),Object(c["h"])("tr",null,[h,Object(c["h"])("td",null,Object(c["M"])($.order.user.email),1)]),Object(c["h"])("tr",null,[j,Object(c["h"])("td",null,Object(c["M"])($.order.user.name),1)]),Object(c["h"])("tr",null,[p,Object(c["h"])("td",null,Object(c["M"])($.order.user.tel),1)]),Object(c["h"])("tr",null,[f,Object(c["h"])("td",null,Object(c["M"])($.order.user.address),1)])])]),Object(c["h"])("div",g,[Object(c["h"])("table",null,[v,(Object(c["B"])(!0),Object(c["g"])(c["a"],null,Object(c["H"])($.order.products,(function(e){return Object(c["B"])(),Object(c["g"])(c["a"],{key:e},[Object(c["h"])("tr",null,[Object(c["h"])("td",m,[Object(c["h"])("img",{src:e.product.imageUrl,alt:""},null,8,w)]),Object(c["h"])("td",null,Object(c["M"])(e.product.title),1),Object(c["h"])("td",P," 小計"+Object(c["M"])(t.$filters.toCurrency(Math.round(e.final_total))),1)]),Object(c["h"])("tr",null,[Object(c["h"])("td",null,"數量： "+Object(c["M"])(e.qty),1)])],64)})),128)),Object(c["h"])("tr",y,[$.isShippingFee?(Object(c["B"])(),Object(c["g"])("td",M,"運費: $100")):Object(c["f"])("",!0)])])])])):Object(c["f"])("",!0),Object(c["k"])(F,{to:"/",class:"back-link"},{default:Object(c["V"])((function(){return[S]})),_:1})])])],64)}r("99af");var $=r("cbe1"),k=r("37ca"),x=r("1915");function F(t){var e=new Date(t);return e.toLocaleDateString()}function B(t){var e=new Date(t);return e.toLocaleTimeString("it-IT")}var C={data:function(){return{currentProgress:this.$route.name,order:{},orderProduct:"",newOrderPrice:"",isShippingFee:!1,orderTime:""}},components:{Progressbar:$["a"]},methods:{completepay:function(){var t=this,e="付款",r=this.$route.params.id,c="".concat("https://vue3-course-api.hexschool.io/","api/").concat("freedom","/pay/").concat(r);this.$http.post(c).then((function(r){r.data.success?(t.$httpMessageState(r,e),t.getOrder(),setTimeout((function(){t.$router.push("/")}),15e3)):t.$httpMessageState(r,e)})).catch((function(r){t.$httpMessageState(r,e)}))},getOrder:function(){var t=this,e=this.$route.params.id,r="".concat("https://vue3-course-api.hexschool.io/","api/").concat("freedom","/order/").concat(e);this.$http.get(r).then((function(e){if(e.data.success){t.order=e.data.order,t.orderTime=t.order.create_at,t.orderTime="".concat(F(1e3*t.orderTime)," ").concat(B(1e3*t.orderTime));var r=t.order.products;for(var c in r)if(r[c].coupon){var n=r[c].coupon.percent;t.order.total/(.01*n)>=850?t.newOrderPrice=t.order.total:(t.newOrderPrice=t.order.total+100,t.isShippingFee=!0)}else t.order.total>=850?t.newOrderPrice=t.order.total:(t.newOrderPrice=t.order.total+100,t.isShippingFee=!0)}}))}},mounted:function(){Object(x["a"])(),this.completepay(),k["a"].emit("update-cart")}},J=r("6b0d"),D=r.n(J);const E=D()(C,[["render",T]]);e["default"]=E},cbe1:function(t,e,r){"use strict";var c=r("7a23"),n={class:"section section-progressbar",id:"section-progressbar"},o={class:"container"},s={class:"progressbar"};function a(t,e,r,a,i,l){return Object(c["B"])(),Object(c["g"])("section",n,[Object(c["h"])("div",o,[Object(c["h"])("ul",s,[Object(c["h"])("li",{class:Object(c["s"])(["progressCart",{active:"Cart"===r.currentProgress}])},"購物車",2),Object(c["h"])("li",{class:Object(c["s"])(["progressFill",{active:"Payment"===r.currentProgress}]),ref:"progressFill"},"填寫資料",2),Object(c["h"])("li",{class:Object(c["s"])(["progressOrder",{active:"Order"===r.currentProgress}])},"訂單確認",2)])])])}var i={props:{currentProgress:{type:String}}},l=r("6b0d"),u=r.n(l);const d=u()(i,[["render",a]]);e["a"]=d}}]);
//# sourceMappingURL=chunk-4f0e8408.a134db7a.js.map