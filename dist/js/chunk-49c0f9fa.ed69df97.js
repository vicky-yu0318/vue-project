(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-49c0f9fa"],{"99af":function(e,t,r){"use strict";var c=r("23e7"),n=r("da84"),o=r("d039"),a=r("e8b5"),s=r("861d"),i=r("7b0b"),l=r("07fa"),u=r("8418"),d=r("65f0"),b=r("1dde"),O=r("b622"),h=r("2d00"),j=O("isConcatSpreadable"),p=9007199254740991,f="Maximum allowed index exceeded",g=n.TypeError,v=h>=51||!o((function(){var e=[];return e[j]=!1,e.concat()[0]!==e})),m=b("concat"),w=function(e){if(!s(e))return!1;var t=e[j];return void 0!==t?!!t:a(e)},P=!v||!m;c({target:"Array",proto:!0,forced:P},{concat:function(e){var t,r,c,n,o,a=i(this),s=d(a,0),b=0;for(t=-1,c=arguments.length;t<c;t++)if(o=-1===t?a:arguments[t],w(o)){if(n=l(o),b+n>p)throw g(f);for(r=0;r<n;r++,b++)r in o&&u(s,b,o[r])}else{if(b>=p)throw g(f);u(s,b++,o)}return s.length=b,s}})},b0c0:function(e,t,r){var c=r("83ab"),n=r("5e77").EXISTS,o=r("e330"),a=r("9bf2").f,s=Function.prototype,i=o(s.toString),l=/function\b(?:\s|\/\*[\S\s]*?\*\/|\/\/[^\n\r]*[\n\r]+)*([^\s(/]*)/,u=o(l.exec),d="name";c&&!n&&a(s,d,{configurable:!0,get:function(){try{return u(l,i(this))[1]}catch(e){return""}}})},b84e:function(e,t,r){"use strict";r.r(t);r("b0c0");var c=r("7a23"),n={class:"section section-order"},o={class:"container"},a=Object(c["h"])("h2",{class:"title"},"訂購已完成",-1),s={key:0,class:"row"},i={class:"col"},l=Object(c["h"])("caption",null," 訂購資訊 ",-1),u=Object(c["h"])("td",{width:"40%"},"訂單金額:",-1),d={width:"60%"},b=Object(c["h"])("td",null,"訂單編號:",-1),O=Object(c["h"])("td",null,"訂購時間:",-1),h=Object(c["h"])("td",null,"Email:",-1),j=Object(c["h"])("td",null,"收件人姓名:",-1),p=Object(c["h"])("td",null,"收件人聯絡電話:",-1),f=Object(c["h"])("td",null,"收件人地址:",-1),g={class:"col"},v=Object(c["h"])("caption",null," 訂單內容 ",-1),m={rowspan:"2"},w=["src"],P={rowspan:"2"},y={style:{"text-align":"right"}},S={key:0,colspan:"3"},M=Object(c["j"])(" 返回首頁 ");function $(e,t,r,$,k,T){var x=Object(c["J"])("Progressbar"),F=Object(c["J"])("router-link");return Object(c["B"])(),Object(c["g"])(c["a"],null,[Object(c["k"])(x,{currentProgress:k.currentProgress},null,8,["currentProgress"]),Object(c["h"])("section",n,[Object(c["h"])("div",o,[a,k.order.id?(Object(c["B"])(),Object(c["g"])("div",s,[Object(c["h"])("div",i,[Object(c["h"])("table",null,[l,Object(c["h"])("tr",null,[u,Object(c["h"])("td",d,Object(c["M"])(e.$filters.toCurrency(k.newOrderPrice)),1)]),Object(c["h"])("tr",null,[b,Object(c["h"])("td",null,Object(c["M"])(k.order.id),1)]),Object(c["h"])("tr",null,[O,Object(c["h"])("td",null,Object(c["M"])(k.orderTime),1)]),Object(c["h"])("tr",null,[h,Object(c["h"])("td",null,Object(c["M"])(k.order.user.email),1)]),Object(c["h"])("tr",null,[j,Object(c["h"])("td",null,Object(c["M"])(k.order.user.name),1)]),Object(c["h"])("tr",null,[p,Object(c["h"])("td",null,Object(c["M"])(k.order.user.tel),1)]),Object(c["h"])("tr",null,[f,Object(c["h"])("td",null,Object(c["M"])(k.order.user.address),1)])])]),Object(c["h"])("div",g,[Object(c["h"])("table",null,[v,(Object(c["B"])(!0),Object(c["g"])(c["a"],null,Object(c["H"])(k.order.products,(function(t){return Object(c["B"])(),Object(c["g"])(c["a"],{key:t},[Object(c["h"])("tr",null,[Object(c["h"])("td",m,[Object(c["h"])("img",{src:t.product.imageUrl,alt:""},null,8,w)]),Object(c["h"])("td",null,Object(c["M"])(t.product.title),1),Object(c["h"])("td",P," 小計"+Object(c["M"])(e.$filters.toCurrency(t.final_total)),1)]),Object(c["h"])("tr",null,[Object(c["h"])("td",null,"數量： "+Object(c["M"])(t.qty),1)])],64)})),128)),Object(c["h"])("tr",y,[k.isShippingFee?(Object(c["B"])(),Object(c["g"])("td",S,"運費: $100")):Object(c["f"])("",!0)])])])])):Object(c["f"])("",!0),Object(c["k"])(F,{to:"/",class:"back-link"},{default:Object(c["V"])((function(){return[M]})),_:1})])])],64)}r("99af");var k=r("cbe1"),T=r("37ca");function x(e){var t=new Date(e);return t.toLocaleDateString()}function F(e){var t=new Date(e);return t.toLocaleTimeString("it-IT")}var B={data:function(){return{currentProgress:this.$route.name,order:{},orderProduct:"",newOrderPrice:"",isShippingFee:!1,orderTime:""}},components:{Progressbar:k["a"]},methods:{completepay:function(){var e=this,t="付款",r=this.$route.params.id,c="".concat("https://vue3-course-api.hexschool.io/","api/").concat("freedom","/pay/").concat(r);this.$http.post(c).then((function(r){r.data.success?(e.$httpMessageState(r,t),e.getOrder(),setTimeout((function(){e.$router.push("/")}),13e3)):e.$httpMessageState(r,t)})).catch((function(r){e.$httpMessageState(r,t)}))},getOrder:function(){var e=this,t=this.$route.params.id,r="".concat("https://vue3-course-api.hexschool.io/","api/").concat("freedom","/order/").concat(t);this.$http.get(r).then((function(t){if(t.data.success){e.order=t.data.order,e.orderTime=e.order.create_at,e.orderTime="".concat(x(1e3*e.orderTime)," ").concat(F(1e3*e.orderTime));var r=e.order.products;for(var c in r)if(r[c].coupon){var n=r[c].coupon.percent;e.order.total/(.01*n)>=850?e.newOrderPrice=e.order.total:(e.newOrderPrice=e.order.total+100,e.isShippingFee=!0)}else e.order.total>=850?e.newOrderPrice=e.order.total:(e.newOrderPrice=e.order.total+100,e.isShippingFee=!0)}}))}},mounted:function(){this.completepay(),T["a"].emit("update-cart")}},C=r("6b0d"),J=r.n(C);const D=J()(B,[["render",$]]);t["default"]=D},cbe1:function(e,t,r){"use strict";var c=r("7a23"),n={class:"section section-progressbar",id:"section-progressbar"},o={class:"container"},a={class:"progressbar"};function s(e,t,r,s,i,l){return Object(c["B"])(),Object(c["g"])("section",n,[Object(c["h"])("div",o,[Object(c["h"])("ul",a,[Object(c["h"])("li",{class:Object(c["s"])(["progressCart",{active:"Cart"===r.currentProgress}])},"購物車",2),Object(c["h"])("li",{class:Object(c["s"])(["progressFill",{active:"Payment"===r.currentProgress}]),ref:"progressFill"},"填寫資料",2),Object(c["h"])("li",{class:Object(c["s"])(["progressOrder",{active:"Order"===r.currentProgress}])},"訂單確認",2)])])])}var i={props:{currentProgress:{type:String}}},l=r("6b0d"),u=r.n(l);const d=u()(i,[["render",s]]);t["a"]=d}}]);
//# sourceMappingURL=chunk-49c0f9fa.ed69df97.js.map